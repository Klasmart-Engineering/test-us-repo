# Changelog

All notable changes to this project will be documented in this file. See [standard-version](https://github.com/conventional-changelog/standard-version) for commit guidelines.

### [2.2.1](https://bitbucket.org/calmisland/kidsloop-live-webrtc-service/compare/v2.2.0...v2.2.1) (2021-10-29)


### Bug Fixes

* **permissions:** update permissions to latest ([cdd7e46](https://bitbucket.org/calmisland/kidsloop-live-webrtc-service/commit/cdd7e465cde599589e75f22f177a1428305d5f54))

## 2.2.0 (2021-10-26)


### Features

* organizations pagination & filtering (UD-987) ([c699a2c](https://bitbucket.org/calmisland/kidsloop-live-webrtc-service/commit/c699a2cd72dbd6cd96cfedb1df5ebfbe907082b0))
* **UD-1310:** categories connections query ([75e0e9b](https://bitbucket.org/calmisland/kidsloop-live-webrtc-service/commit/75e0e9b89b8ee2156e71a2d0c54293ad11a74d37))
* **UD-1313:** permissionsConnection query ([d0b9470](https://bitbucket.org/calmisland/kidsloop-live-webrtc-service/commit/d0b9470401d041615bb137797192d44ce9432182))


### Bug Fixes

* add organization to user not working ([260ab98](https://bitbucket.org/calmisland/kidsloop-live-webrtc-service/commit/260ab987090b1674ed709af45f4b52944a7e59f3))
* can add user to school w/o being part of org ([3ea39ea](https://bitbucket.org/calmisland/kidsloop-live-webrtc-service/commit/3ea39ea090860932854fdbdc658af1ae69a6f2a6))
* deploy fails ([0d58e02](https://bitbucket.org/calmisland/kidsloop-live-webrtc-service/commit/0d58e02196985cec5bc8e6dfc18d32bc16407948))
* organizationMembership.schoolMemberships ([8623baa](https://bitbucket.org/calmisland/kidsloop-live-webrtc-service/commit/8623baa79ed5f65963ebef56920715f393d6bce5))
* school_membership returning null ([0bc8f92](https://bitbucket.org/calmisland/kidsloop-live-webrtc-service/commit/0bc8f92c82a71523058bbb25a83d377663e142e8))
* schools from other users returned ([8e0c014](https://bitbucket.org/calmisland/kidsloop-live-webrtc-service/commit/8e0c01432c4847b5875fc8e751d336e975d336e7))
* **tests:** fix ci pipeline ([de6612f](https://bitbucket.org/calmisland/kidsloop-live-webrtc-service/commit/de6612f47aee0f062a7c7a22d5aeaa544bb34d27))
* **User CSV:** UD-844 - don't overwrite shortcode ([d47b925](https://bitbucket.org/calmisland/kidsloop-live-webrtc-service/commit/d47b9254c7098504b01c31739317d6e21e19bcf7))
* user.schoolsWithPermission ([7d1328e](https://bitbucket.org/calmisland/kidsloop-live-webrtc-service/commit/7d1328e3a793dccab73617f07a8383b73709803f))
* Version endpoint (UD-1213) ([b0839f6](https://bitbucket.org/calmisland/kidsloop-live-webrtc-service/commit/b0839f639e5bdb79a6791fed2adab591fee3a595))

### Changelog

All notable changes to this project will be documented in this file. Dates are displayed in UTC.

Generated by [`auto-changelog`](https://github.com/CookPete/auto-changelog).

#### [v2.1.0](https://bitbucket.org/calmisland/kidsloop-user-service/compare/v2.1.0..v2.0.0)

- UD-774: Fixed promise assertions for integration/model [`#531`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/531)
- UD-774: Corrected promise assertions in entities int tests [`#529`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/529)
- perf/schoolsConnection UD-965, fix/schoolsConnection shortcode filter UD-1037 [`#523`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/523)
- perf/usersConnection UD-956 [`#521`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/521)
- Use maps for frequently searched data sets in the loaders [`#528`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/528)
- UD-728 Teacher can not see some users on Users page [`#527`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/527)
- fix: logic for success or failure of class_name in cvs [`#520`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/520)
- clarified which secret to use to generate a token [`#522`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/522)
- Support query logging with QueryMetricsLogger [`#526`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/526)
- chore/UD-1079-fix-flaky-user-service-tests [`#517`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/517)
- Adding optional alternate_email and alternate_phone to csv user upload [`#504`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/504)
- UD-874 Add logger to test number of database connections made [`#499`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/499)
- The editMembership side of adding joi validations [`#456`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/456)
- UD-1024 Subjects filters [`#518`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/518)
- fix: classesConnection schoolId filter with nonAdminClassScope [`#511`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/511)
- perf/UD-956-optimize-selects-and-join-in-conn [`#519`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/519)
- Bugfix/UD-970 school names disappeared when add school filter [`#516`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/516)
- UD-943 Limit page size to a maximum of 50 [`#491`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/491)
- fix: UD-1038 findRolesById condition [`#506`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/506)
- perf: UD-1078 add Dataloader for root User query [`#515`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/515)
- UD-100 - Subject List Searching [`#512`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/512)
- UD-999: configure database replicas [`#509`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/509)
- fix: Schools vanishing from userConnection role id filtered results. [`#510`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/510)
- fix: other roles visible when users filtered by roles [`#507`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/507)
- perf: optimise classesConnection [`#492`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/492)
- Revert "Merged in disable-token-check-temporarily (pull request #497)" [`#498`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/498)
- 🔧 Add new permissions according to spreadsheet [`#505`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/505)
- UD-446 467 Without Baggage [`#468`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/468)
- Feature/UD-280 enhance create user validations [`#432`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/432)
- UD-819 - Subject List Pagination & Sorting [`#486`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/486)
- 🤓 Add onboarding document [`#500`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/500)
- UD-900 Optimize loader queries [`#488`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/488)
- TypeORM migrations [`#462`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/462)
- Hotfix UD-934 [`#501`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/501)
- Revert "Merged in UD-764-valid-tokens-on-all-endpoints (pull request #469)" [`#497`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/497)
- [UD-948] Add deprecated directive for unpaginated programs queries [`#496`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/496)
- [UD-946] Add deprecated directive for unpaginated classes queries [`#494`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/494)
- [UD-947] Add deprecated directive for unpaginated schools queries [`#495`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/495)
- feat: DataLoader for OrganizationMembership.user [`#490`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/490)
- School memberships loaders [`#489`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/489)
- [UD-765] Add deprecated directive to getUser [`#485`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/485)
- UD-847: search emails in lower case & mixed case to prevent duplicating existing users [`#484`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/484)
- Bugfix/UD-904 editing school membership for a user in one org resets membership in other orgs [`#487`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/487)
- UD-900 remove filters on child nodes [`#483`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/483)
- fix: permissions checked on schoolsConnection [`#479`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/479)
- UD-847: save the preprocessed email/phone instead of raw values [`#477`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/477)
- UD-886: search for org using org name AND user membership [`#480`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/480)
- UD-764 valid tokens on all endpoints [`#469`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/469)
- 🔧 Re-enable alpha deployments [`#481`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/481)
- Improve linting and formatting [`#476`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/476)
- 🔧 Turn off deployments on Alpha for stable env [`#472`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/472)
- 🔧 Add auto-changelog to generate md [`4a6a03a`](https://bitbucket.org/calmisland/kidsloop-user-service/commits/4a6a03a92bce5e211a9e7ebdbefd07381e88fa1a)
- 🤓 Document release process [`77025f0`](https://bitbucket.org/calmisland/kidsloop-user-service/commits/77025f0e9c6d68031ad82e926ad4ec235b27c3cf)
- 🔧 Update changelog [`a05d0fa`](https://bitbucket.org/calmisland/kidsloop-user-service/commits/a05d0fab8d11449863740ffbee4e4176c9c498b7)

#### v2.0.0

> 18 August 2021

- Release v2.0.0 [`#474`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/474)
- Testing/csv fix with example [`#457`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/457)
- UD-814: Prevent terminating CSV validation early by managing row errors separately [`#465`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/465)
- Revert "Merged in bugfix/UD-800-csv-user-upload-exiting-shortcode (pull request #461)" [`#467`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/467)
- UD-486 - Age Range List Filtering [`#463`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/463)
- UD-814: Make all CSV processing function share the same interface [`#464`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/464)
- fix (UD-787): flag null as an empty value to trigger the required() validation constraint [`#459`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/459)
- UD-128 - Class List Filtering [`#460`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/460)
- fix: UD-800 - updated duplicate shortcode params [`#461`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/461)
- fix (UD-791): update error messages for organization_role_name [`#458`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/458)
- fix(UD-13): use a custom message when both email and phone are missing [`#453`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/453)
- UD-785: set ORGANIZATION_NAME_MAX_LENGTH to 30 [`#455`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/455)
- UD-687 - Avoiding 'None Specified' Age Range on Age Range Filter Program's [`#443`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/443)
- hotfix (CR-252) - always allow null or empty strings for optional properties [`#454`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/454)
- fix: UD-746 - ignore school_role_name in User CSV [`#451`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/451)
- Allow header-less CSV column data [`#449`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/449)
- UD-130 - Classes List Searching [`#438`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/438)
- UD-132 - Classes List Pagination & Sorting [`#437`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/437)
- fix: don't convert the pagination cursor to ascii before parsing [`#448`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/448)
- fix: UD-718 -  getClasses if class has no School [`#447`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/447)
- fix flakey phone filter test [`#445`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/445)
- fix: UD-518 - no category/level for 428/429 perms [`#442`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/442)
- UD-13: CSV error message updates [`#441`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/441)
- fix: UD-709 migration on school_name uniqueness [`#444`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/444)
- fix: my_users() to check organizationMembership is active [`#439`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/439)
- fix: use the full validation schema for CSV errors, otherwise missing props aren't checked [`#440`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/440)
- fix (UD-132): use the correct error message for duplicated shortcodes [`#434`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/434)
- add and use a new unauthorized message when uploading CSV users to an org [`#435`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/435)
- UD-568 - Programs and Users Filtered by Class ID [`#425`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/425)
- UD-465 PreviewMode [`#433`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/433)
- fix flakey test: use deterministic values when testing age ranges [`#436`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/436)
- UD-568 - Multiple Column Aliases [`#429`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/429)
- feat: latest permissions.csv [`#431`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/431)
- AgeRangeSummaryNode ==&gt; AgeRangeConnectionNode [`#426`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/426)
- UD-13: Data-driven input validation [`#418`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/418)
- Feature/UD-12 Enhance CSV USER Create or Update [`#421`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/421)
- test: don't use small random distributions in tests -&gt; flakey! [`#423`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/423)
- test: prevent race condition in test [`#422`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/422)
- UD-569: fix ambiguous column reference [`#420`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/420)
- feat: Added bada STEAM 1 [`#419`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/419)
- UD-544 - Age Range From and Age Range To Program's Filters [`#415`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/415)
- feat: allow duplicate School names if inactive [`#393`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/393)
- 🔧 Remove ":" from bitbucket yml for echoes [`#417`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/417)
- 🔧 Make explicit deploy tags [`#416`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/416)
- Acceptance tests for delete branding image and delete branding color [`#411`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/411)
- [UD-539] 🔧 Add automate deployment [`#414`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/414)
- [UD-539] publish docker images for all commits in master and PRs [`#413`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/413)
- [UD-539] 🔧 Remove automated deployment from bitbucket [`#412`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/412)
- UD-549 - fix: value & operator properties of filters are required, not optional [`#410`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/410)
- UD-539 automate alpha deployment [`#409`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/409)
- [UD-539] 🤖 Automate deploymen to alpha [`#408`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/408)
- [UD-377] 👮 Add acceptance tests to our CI pipeline [`#402`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/402)
- UD-289 - Secondary Sorting Always is in Ascending Order [`#407`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/407)
- UD-489 - Programs Query Crash [`#406`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/406)
- fix: Stop returning error if myUsers is empty [`#404`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/404)
- Fix VNG Cloud wrong remote file URI [`#405`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/405)
- feat:Stops school admin seeing all org classes [`#387`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/387)
- [UD-376] Branding acceptance tests [`#385`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/385)
- UD-476 - Grade List Filtering [`#401`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/401)
- [UD-388] 🔧 Update to latest permissions [`#399`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/399)
- [UD-270] 🔧 Update to latest permissions [`#398`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/398)
- UD-447: add support for filtering programs by school ID [`#396`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/396)
- fix: allow removing alternate_phone/email [`#397`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/397)
- UD-344 Last Page button shows always 10 users [`#395`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/395)
- UD-400 - Age Range List Pagination & Sorting [`#390`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/390)
- UD-415 - Multiple Sorting [`#389`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/389)
- fix: check user is active as well as permissions [`#394`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/394)
- fix: Stop return inactive users for myUsers() [`#392`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/392)
- feat: only show their students to teachers [`#386`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/386)
- fix:allow editMembership to change email/phone and keep same user id [`#391`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/391)
- [UD-420] 🔧 Change GCP link for media link [`#388`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/388)
- [UD-4] 🔧 Fix link retrieval for GCP [`#383`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/383)
- Remove unauthenticated route that returns all users [`#382`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/382)
- docs: update instructions for connecting to a local FE [`#379`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/379)
- [UD-5] 💀 Increase the max file size to be 2MB [`#381`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/381)
- UD-410: fix brandingForOrganizations dataloader [`#380`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/380)
- Proposal: No more any 💀 [`#357`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/357)
- UD-389 - Program List Filtering [`#377`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/377)
- fix:missing fields in two permission records [`#378`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/378)
- UD-373: deleteBrandingColor [`#376`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/376)
- UD-374 - Create Delete Branding Image Mutation [`#375`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/375)
- UD-361 - Remove Image from Branding [`#373`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/373)
- UD-375: Update hex color validation [`#374`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/374)
- UD-360 BE Remove references of favicon on schemas graphql and DB [`#372`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/372)
- UD-4 Complete integration with cloud plus local stack [`#371`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/371)
- UD-106 - Grade List Searching [`#364`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/364)
- Allow local hub setup to connect [`#350`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/350)
- UD-289 - Grade List Sorting [`#363`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/363)
- UD-191 - Grade List Pagination [`#362`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/362)
- [UD-4] ⛅️ Add docker-compose [`#367`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/367)
- Copy `customTypings` folder to docker container [`#366`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/366)
- UD-4 Pre-work for integrate cloud storage [`#365`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/365)
- [UK-3] File uploading to cloud storages [`#359`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/359)
- Branding Schema Refinement [`#361`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/361)
- UD-107 - Program List Searching [`#358`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/358)
- UD-2 be   upload logo image into user service [`#346`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/346)
- UD-109 - Hotfix - Add System Filter for Programs Pagination [`#354`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/354)
- build image from commit [`#356`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/356)
- Schools pagination, filtering & sorting [`#338`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/338)
- KL-4860 - Migration to Rename Duplicated Subjects [`#329`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/329)
- UD-109 - Program List Pagination & Sorting [`#353`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/353)
- KL-4852 - Migration to Rename Duplicated Grades [`#325`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/325)
- Paginated Sorting + usersConnection Integration [`#351`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/351)
- UD-266: check for permissions on the org membership, not the school membership [`#352`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/352)
- fix: UserConnectionNode `id` type [`#337`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/337)
- [KL-150] 🔧 Update permissions [`#349`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/349)
- Security/cors [`#348`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/348)
- [KL-4923] 🔧 Update permissions [`#345`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/345)
- UD-42: restrict eligible teachers for a class based on class & school memberships [`#344`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/344)
- Fix local environment variables and update docs [`#340`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/340)
- [KL-4938] 🔧 Update permissions [`#342`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/342)
- KL-4857: implemented the updated definition of an "eligible student" for classes [`#336`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/336)
- Update VSCode launch tasks [`#333`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/333)
- Remove createOrUpdateSystemEntities from graphql and run on db connect [`#331`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/331)
- docs: update instructions for connecting to a local frontend [`#330`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/330)
- KL-4775 - CSV Upload User Shortcode is not Updated [`#320`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/320)
- Add recommended VSCode extensions [`#294`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/294)
- Update instructions for connecting to local FE [`#317`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/317)
- Fix prettier formatting [`#327`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/327)
- KL-4839: Use take() instead of limit() when performing pagination [`#328`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/328)
- KL-4819 - Prevent requests from the sharing the same scope object [`#326`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/326)
- 🔧 Update permissions [`#324`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/324)
- [KL-4681] 🔧 Update permissions [`#323`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/323)
- uuid filter type on fields which are uuid [`#322`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/322)
- KL-4725: Users with permission view_my_class_users_40112 can now view school users [`#321`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/321)
- Fix schoolId filter for non-admins [`#318`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/318)
- KL-4793 - Teacher Removed in All Assigned Classes Bug Fix [`#314`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/314)
- KL-4807 joindate type bug [`#316`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/316)
- KL-4725: Permissions-based user filtering [`#311`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/311)
- KL-4805: filter by phone throws error [`#313`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/313)
- fix: handle role filtering by organization ID [`#312`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/312)
- KL-4788 - Issuer Authorization [`#309`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/309)
- Fix wrong attribute name for users csv upload [`#304`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/304)
- Fix ambiguous column reference when filtering by user ID [`#310`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/310)
- style: use Prettier formatting for tests [`#308`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/308)
- fix: prevent out of bounds error when paginating backwards [`#307`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/307)
- fix: use the appropriate status values when creating the usersConnection response [`#306`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/306)
- fix: Backwards pagination, removed offset maths [`#305`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/305)
- filter on org memebrship status [`#303`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/303)
- [KL-4728] CSV Upload User Gender in Lowercase [`#302`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/302)
- Revert "Merged in revert-shortcode-bug (pull request #299)" [`#300`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/300)
- Dataloader resolvers for usersConnection query [`#301`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/301)
- Revert "Merged in KL-4752-csv-upload-user-existing-shortcode-bug (pull request #289)" [`#299`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/299)
- [KL-4752] CSV Upload User Duplicated Shortcode Bug [`#289`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/289)
- renamed user joe and billy [`#298`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/298)
- [KL-4585] Return high level error for CSV file size exceeded error [`#296`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/296)
- Fix usersConnection filtering for non admins [`#297`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/297)
- KL-4698 - CSV Upload User Email and Phone Invalid Format [`#283`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/283)
- [KL-4760] 🐞 Fix user scope when not admin [`#295`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/295)
- [KL-4742] CSV Upload User Organization Role Name is Mandatory [`#288`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/288)
- [KL-4741] CSV Upload User Given Name and Family Name are Mandatory [`#287`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/287)
- KL-4745 filter on school and roles [`#293`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/293)
- Add string filtering option for ignoring case sensitivity [`#282`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/282)
- Add school userStatus [`#292`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/292)
- [KL-4755] CSV Upload User Given and Family Names Max Length [`#290`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/290)
- [KL-4585] Restructure CSV uploading errors response [`#291`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/291)
- changes to schema and related implementation [`#284`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/284)
- [KL-4654] Remove user id cookie [`#285`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/285)
- [KL-4585] Return multiple errors for CSV uploading [`#280`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/280)
- "contains" filters with empty values should be ignored [`#281`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/281)
- KL-4654 - WIP - Many Empty Profiles for New User [`#277`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/277)
- Update README.md [`#278`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/278)
- Add support for connecting to a locally running frontend [`#275`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/275)
- add _resolveType resolvers to pagination interfaces [`#276`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/276)
- initial commit [`#274`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/274)
- KL-4334 retrieve schools  and organizations for user pagination [`#273`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/273)
- Bitbucket Pipeline to push images to AWS Infra ECR Repository [`#270`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/270)
- Update usersConnection query to use the new schema [`#272`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/272)
- KL-4669 - CSV Upload Class Shortcode Invalid Format Validations [`#271`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/271)
- Filter user pagination on organization [`#263`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/263)
- KL-4666 - CSV Upload Class Name Invalid Format Bug [`#268`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/268)
- KL-4640 - CSV Upload School Name Validations [`#264`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/264)
- User & Permissions Filtering [`#269`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/269)
- Basic Query Filtering [`#262`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/262)
- KL-4641 - CSV Upload School Shortcode Already Exist Validation [`#265`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/265)
- KL-4663 - CSV Upload Classes are Updated if already Exists [`#267`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/267)
- Define objects for paginate users methods [`#266`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/266)
- Fix: schema user.addSchool wrong return type [`#236`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/236)
- KL-4589 - Rename Duplicate Organization Names Migration [`#258`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/258)
- [KL-4542] Standardise CSV error messages [`#247`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/247)
- backward pagination [`#255`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/255)
- 🐞 Fix dockerfile to not use schema.graphql [`#257`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/257)
- [KL-4513] Adapt permissions query to new pagination implementation [`#256`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/256)
- Remove old pagination implementation and associated endpoints [`#254`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/254)
- KL-4574 be split graphql schema into domains [`#250`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/250)
- Pagination implementation - Move forward [`#248`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/248)
- Specify particular versions of Node.js and TypeScript (if using VSCode) that should be used [`#252`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/252)
- [KL-4599] Compile CSV Errors in a List [`#251`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/251)
- [KL-4563] Shortcode should be Optional in School Uploads [`#249`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/249)
- KL-4512 Upload Programs from CSV [`#245`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/245)
- [KL-4558] Upload Age Ranges from CSV File [`#246`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/246)
- Update documentation [`#244`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/244)
- Deal with empty csv input files [`#242`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/242)
- Reset row count on re-read of csv [`#243`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/243)
- [KL-4271] Upload Categories from CSV File [`#237`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/237)
- Change user_id in editMembership to ID type [`#241`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/241)
- [KL-4520] 🐞 Fix permission bug [`#239`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/239)
- [KL-4521] 🔧 Adapt users CSV upload to multiusers [`#240`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/240)
- Bugfix/KL-4493 connected parent sibilings information incorrectly updated [`#238`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/238)
- [KL-4268] Upload Roles Permissions Bug [`#235`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/235)
- Upload subjects functionality [`#225`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/225)
- Added tests to schools CSV upload [`#227`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/227)
- [KL-4269] Upload Grades from CSV File [`#233`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/233)
- [KL-3789] Upload Organizations Unit Tests [`#234`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/234)
- [KL-4269] Rereadable Streams Code Adaptation [`#232`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/232)
- KL-3760 upload sub categories [`#231`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/231)
- Email address of users is not unique [`#169`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/169)
- [KL-4267] 🔩 Create tests for user csv uploading [`#229`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/229)
- [KL-4325] 🔧 Update permissions to mirror spreadsheet [`#230`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/230)
- KL-4270 unit tests [`#228`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/228)
- KL-4268 - Upload Role from CSV [`#224`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/224)
- KL-4266 be   upload school for an organization [`#212`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/212)
- lock package versions [`#221`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/221)
- KL-4270 upload class [`#219`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/219)
- KL-3789 - Upload Organizations from a CSV File [`#214`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/214)
- KL-4270- Csv upload create class [`#215`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/215)
- [KL-3789] Create CSV upload base [`#210`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/210)
- KL-4170 - Primary Flag added in User Entity [`#201`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/201)
- KL-4171: Add alternate email phone for user [`#202`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/202)
- changes for shortcode [`#194`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/194)
- Add gender attribute to user [`#199`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/199)
- fix shortcode validation [`#196`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/196)
- Feature/KL-3500 as an org admin i want the additional field of ShortCode [`#190`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/190)
- [KL-3699] Add system records [`#191`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/191)
- [KL-3586] Integrate schools with rest entities [`#185`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/185)
- [KL-3585] Integrate classes with new entities [`#184`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/184)
- KL-3747 [`#181`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/181)
- [KL-3580] Add subject entity [`#183`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/183)
- KL-3749 add grade entity [`#178`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/178)
- [KL-3579] Introduce system age ranges and some refactor [`#176`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/176)
- Feature/KL-3878 support for getting the user id from a cookie [`#172`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/172)
- [KL-3737] Allow delete age range [`#171`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/171)
- v1_getClasses using directives [`#166`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/166)
- [KL-3736] Allow age ranges edition [`#170`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/170)
- v1_getRoles using directives [`#165`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/165)
- [KL-3579] Add age range entity [`#168`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/168)
- make model.setUser and model.newUser handle date_of_birth [`#167`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/167)
- [KL-3095] Update permissions with spreadsheet and some cleanup [`#164`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/164)
- fix user fields in organizations_v1 [`#161`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/161)
- [KL-3095] Clean up roles permissions migration code [`#162`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/162)
- [KL-3281] Add existing permissions query [`#160`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/160)
- wrote a test and moved files around [`#159`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/159)
- paging users, organizations, roles and classes works [`#140`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/140)
- [KL-3280] Migrate permissions for all orgs [`#151`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/151)
- [KL-3280] Allow creation of system permissions [`#150`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/150)
- [KL-3280] Migrate existing role memberships [`#147`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/147)
- [KL-3280] Stop duplicating system roles [`#145`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/145)
- [KL-3259] Add authentication to organizations query [`#144`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/144)
- [KL-3280] Identify system roles [`#142`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/142)
- [KL-3101] Allow inactivate roles [`#138`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/138)
- [KL-3277] Update permission fields [`#136`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/136)
- filter Model methods that return aggregations by permissions [`#122`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/122)
- [KL-3278] Backfill permission new fields [`#129`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/129)
- KL-3277 add permission new fields [`#128`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/128)
- [KL-3253] Repurpose user name [`#125`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/125)
- [KL-3255] Change me to use user id cookie [`#123`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/123)
- [KL-3254] Add myUsers query to API [`#121`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/121)
- added  date_of_birth MM-YYYY to User [`#118`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/118)
- [KL-3253] Add switch user mutation [`#120`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/120)
- Remove dependency - email address for user.user_id [`#67`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/67)
- Refactor  _setMembership [`#55`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/55)
- [KL-2659] Add permission test and update to look like in spreadsheet [`#56`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/56)
- [KL-2517] Update permissions inconsistencies [`#40`](https://bitbucket.org/calmisland/kidsloop-user-service/pull-requests/40)
- 🐞 Fix package.json [`7ff8205`](https://bitbucket.org/calmisland/kidsloop-user-service/commits/7ff820566c020a0388678e1f318964cdbbf8d636)
- update core eslint libraries [`d9ad5c8`](https://bitbucket.org/calmisland/kidsloop-user-service/commits/d9ad5c8565513a253dbec53365ef9e1db2708aa5)
- Added await keyword to getting operation result [`8470469`](https://bitbucket.org/calmisland/kidsloop-user-service/commits/8470469120eb2399bb6e40772b38228db9fadd22)
